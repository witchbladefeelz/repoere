# ะะฑะฝะพะฒะปะตะฝะธั Admin Bot

## ๐ ะะพะฒัะต ััะฝะบัะธะธ

### 1. **ะัะพัะผะพัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน**
- **ะะพะผะฐะฝะดะฐ:** `/allusers`
- **ะะฝะพะฟะบะฐ:** `๐ฅ All Users`
- **ะะฟะธัะฐะฝะธะต:** ะะพะบะฐะทัะฒะฐะตั ัะฟะธัะพะบ ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ ัะธััะตะผะต (ะดะพ 100)
- **ะะฝัะพัะผะฐัะธั:** User ID, HWID, ะดะฐัะฐ ะธััะตัะตะฝะธั, ััะฐััั, ะฑะฐะฝ

### 2. **ะัะพัะผะพัั ะฒัะตั ะบะปััะตะน**
- **ะะพะผะฐะฝะดะฐ:** `/allkeys`
- **ะะฝะพะฟะบะฐ:** `๐ All Keys`
- **ะะฟะธัะฐะฝะธะต:** ะะพะบะฐะทัะฒะฐะตั ะฒัะต subscription ะบะปััะธ ะฒ ัะธััะตะผะต (ะดะพ 100)
- **ะะฝัะพัะผะฐัะธั:** ะะปัั, ะฒะปะฐะดะตะปะตั (User ID), ะบะพะปะธัะตััะฒะพ ะดะฝะตะน, ััะพะบ ะดะตะนััะฒะธั

### 3. **ะะฐััะพะฒะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะดะฝะตะน ะฒัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปัะผ**
- **ะะพะผะฐะฝะดะฐ:** `/adddaysall <days>`
- **ะะฝะพะฟะบะฐ:** `๐ Add Days to All`
- **ะะฟะธัะฐะฝะธะต:** ะะพะฑะฐะฒะปัะตั ัะบะฐะทะฐะฝะฝะพะต ะบะพะปะธัะตััะฒะพ ะดะฝะตะน ะบะพ ะฒัะตะผ ะฟะพะดะฟะธัะบะฐะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- **ะะตะทะพะฟะฐัะฝะพััั:** ะขัะตะฑัะตั ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฟะตัะตะด ะฒัะฟะพะปะฝะตะฝะธะตะผ
- **ะะพะณะธัะพะฒะฐะฝะธะต:** ะัะต ะดะตะนััะฒะธั ะทะฐะฟะธััะฒะฐัััั ะฒ admin_action_logs

## ๐ ะะฑะฝะพะฒะปะตะฝะฝะพะต ะณะปะฐะฒะฝะพะต ะผะตะฝั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ Statistics    ๐ฅ All Users      โ
โ  ๐ All Keys      ๐ Reset Requests โ
โ  ๐ Lookup User   ๐ Search HWID    โ
โ  โ Ban           โ Unban          โ
โ  โ Add Days      ๐ Add Days to Allโ
โ  ๐ Delete HWID   ๐ View User Keys โ
โ  โฐ Expired       ๐ซ Banned         โ
โ  ๐ Action Logs                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะะฝะพะฟะบะธ ะฝะฐะฒะธะณะฐัะธะธ

ะะพ ะฒัะตั ะผะตะฝั ะดะพะฑะฐะฒะปะตะฝั ะบะฝะพะฟะบะธ **"๐ Back to Menu"** ะดะปั ะฑััััะพะณะพ ะฒะพะทะฒัะฐัะฐ ะฒ ะณะปะฐะฒะฝะพะต ะผะตะฝั.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะพะดัะฒะตัะถะดะตะฝะธะต ะดะปั ะบัะธัะธัะตัะบะธั ะพะฟะตัะฐัะธะน

ะัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะบะพะผะฐะฝะดั `/adddaysall` ะธะปะธ ะฝะฐะถะฐัะธะธ ะบะฝะพะฟะบะธ `๐ Add Days to All`:

1. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต
2. ะะฐะฟัะฐัะธะฒะฐะตั ะฟะพะดัะฒะตัะถะดะตะฝะธะต ั ะบะฝะพะฟะบะฐะผะธ:
   - โ Yes, Add Days
   - โ Cancel
3. ะะพัะปะต ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฒัะฟะพะปะฝัะตั ะพะฟะตัะฐัะธั
4. ะะพะบะฐะทัะฒะฐะตั ัะตะทัะปััะฐั ั ะบะพะปะธัะตััะฒะพะผ ะทะฐััะพะฝัััั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะพัะผะพัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
```
/allusers
```
ะธะปะธ ะฝะฐะถะฐัั ะบะฝะพะฟะบั `๐ฅ All Users`

**ะัะฒะพะด:**
```
๐ฅ All Users (15):

1. User ID: 8123918703
   ๐ป HWID: ABC123XYZ
   ๐ Expires: 2025-12-11 01:44:24
   ๐ Status: โ Active (27d left)
   ๐ Banned: No

2. User ID: 7654321098
   ๐ป HWID: DEF456UVW
   ๐ Expires: 2025-11-20 15:30:00
   ๐ Status: โ Expired
   ๐ Banned: No
...
```

### ะัะพัะผะพัั ะฒัะตั ะบะปััะตะน
```
/allkeys
```
ะธะปะธ ะฝะฐะถะฐัั ะบะฝะพะฟะบั `๐ All Keys`

**ะัะฒะพะด:**
```
๐ All Subscription Keys (8):

1. KEYRCBFF06QOBT6F72V
   ๐ค Owner ID: 8123918703
   ๐ Duration: 30 day(s)
   โฐ Status: Never expires (not activated yet)

2. KEYXYZ789ABC123DEF
   ๐ค Owner ID: 7654321098
   ๐ Duration: 90 day(s)
   โฐ Status: โ Valid (85 days left, expires 2026-02-15 10:00 UTC)
...
```

### ะะฐััะพะฒะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะดะฝะตะน
```
/adddaysall 7
```
ะธะปะธ ะฝะฐะถะฐัั ะบะฝะพะฟะบั `๐ Add Days to All` ะธ ะฒะฒะตััะธ ะบะพะปะธัะตััะฒะพ ะดะฝะตะน

**ะัะพัะตัั:**
1. ะัะตะดัะฟัะตะถะดะตะฝะธะต ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ
2. ะะพัะปะต ะฟะพะดัะฒะตัะถะดะตะฝะธั: "โณ Processing..."
3. ะะตะทัะปััะฐั:
```
โ Success!

Added 7 day(s) to 15 user(s).

All subscriptions have been extended.
```

## ๐๏ธ ะะทะผะตะฝะตะฝะธั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั

### ะะพะฒัะต ะผะตัะพะดั ะฒ LicenseRepository:

```csharp
// ะะพะปััะธัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
Task<IReadOnlyList<UserLicenseRecord>> GetAllUsersAsync(int limit = 100)

// ะะพะปััะธัั ะฒัะต ะบะปััะธ ั ะฒะปะฐะดะตะปััะฐะผะธ
Task<IReadOnlyList<SubscriptionKeyWithOwner>> GetAllKeysWithOwnersAsync(int limit = 100)

// ะะพะฑะฐะฒะธัั ะดะฝะธ ะฒัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปัะผ
Task<int> AddDaysToAllUsersAsync(int days)
```

### SQL ะทะฐะฟัะพัั:

**GetAllUsersAsync:**
```sql
SELECT id, hwid, subscription, banned, last_key
FROM users
ORDER BY subscription DESC
LIMIT @Limit
```

**GetAllKeysWithOwnersAsync:**
```sql
SELECT id AS UserId, subscription_key, days, expires_at
FROM subscriptions
ORDER BY expires_at DESC, subscription_key
LIMIT @Limit
```

**AddDaysToAllUsersAsync:**
```sql
UPDATE users
SET subscription = DATE_ADD(
    IF(subscription > NOW(), subscription, NOW()),
    INTERVAL @Days DAY
)
```

## ๐ ะะพะณะธัะพะฒะฐะฝะธะต

ะัะต ะฝะพะฒัะต ะดะตะนััะฒะธั ะปะพะณะธัััััั ะฒ ัะฐะฑะปะธัั `admin_action_logs`:

- `view_all_users` - ะฟัะพัะผะพัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- `view_all_keys` - ะฟัะพัะผะพัั ะฒัะตั ะบะปััะตะน
- `add_days_all` - ะผะฐััะพะฒะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะดะฝะตะน

ะัะธะผะตั ะทะฐะฟะธัะธ ะปะพะณะฐ:
```
Admin ID: 8123918703
Action: add_days_all
Target: users/all
Details: Added 7 days to 15 users
Timestamp: 2025-11-14 08:00:00
```

## ๐ ะะฐะฟััะบ ะพะฑะฝะพะฒะปะตะฝะฝะพะณะพ ะฑะพัะฐ

```bash
cd src/HwidBots.MultiBot
dotnet build
dotnet run
```

ะัะต ะธะทะผะตะฝะตะฝะธั ะพะฑัะฐัะฝะพ ัะพะฒะผะตััะธะผั ะธ ะฝะต ััะตะฑััั ะผะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั.
